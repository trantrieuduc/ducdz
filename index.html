<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DucCar - Trang chủ</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <!-- css -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="index.html">
        <img src="img/logo.png" alt="Logo" height="40" class="me-2">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link active" href="index.html">Trang chủ</a></li>
          <li class="nav-item"><a class="nav-link" href="sanpham.html">Sản phẩm</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">Về chúng tôi</a></li>
          <li class="nav-item"><a class="nav-link" href="lienhe.html">Liên hệ</a></li>
        </ul>
        <form class="d-flex ms-lg-3 my-2 my-lg-0" onsubmit="searchProducts();return false;">
          <input id="searchInput" class="form-control me-2" type="search" placeholder="Tìm xe...">
          <button class="btn btn-outline-light" type="submit"><i class="fas fa-search"></i></button>
        </form>
        <button class="btn btn-outline-light ms-lg-3 my-2 my-lg-0 position-relative" onclick="openCart()">
          <i class="fas fa-shopping-cart"></i>
          <span id="cart-count"
            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"></span>
        </button>
        <div id="auth-area" class="d-flex align-items-center ms-3">
          <button id="btn-login" class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#authModal">
            <i class="fas fa-user"></i> Đăng nhập
          </button>
          <div id="userMenu" class="dropdown d-none">
            <a class="btn btn-outline-light dropdown-toggle" href="#" id="userMenuBtn" data-bs-toggle="dropdown">
              <i class="fas fa-user-circle"></i> <span id="userNameDisplay"></span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuBtn">
              <li><a class="dropdown-item" href="#" id="accountProfile">Tài khoản</a></li>
              <li><a class="dropdown-item d-flex justify-content-between align-items-center" href="#"
                  id="orderHistoryBtn" onclick="renderOrderHistory()">Lịch sử đơn hàng <span id="order-count"
                    class="badge bg-secondary">0</span></a></li>
              <li id="adminMenu" class="d-none"><a class="dropdown-item" href="#" id="openAdmin">Tính năng admin</a>
              </li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item text-danger" href="#" id="btn-logout">Đăng xuất</a></li>
            </ul>
          </div>
        </div>
        <button class="btn btn-outline-light ms-3 my-2 my-lg-0" id="dark-toggle">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <video autoplay muted loop playsinline>
      <source src="img/The new Porsche 911  Iconic to the core - Porsche (1080p, h264).mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    <div class="hero-title container">
      <h1 class="fw-bold display-4">Chào mừng đến với DucCar</h1>
      <p class="lead">Thế giới siêu xe trong tầm tay bạn</p>
      <a href="sanpham.html" class="btn btn-primary btn-lg mt-3">Khám phá ngay</a>
    </div>
  </section>

  <!-- CAROUSEL -->
  <main class="container py-5">
    <div id="carouselExample" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000"
      data-bs-pause="false">
      <div class="carousel-inner">

        <!-- Item 1 -->
        <div class="carousel-item active">
          <div class="row align-items-center g-4">
            <div class="col-12 col-md-6 text-center">
              <img src="img/Porsche911.jpg" class="img-fluid shadow rounded" alt="Porsche 911">
            </div>
            <div class="col-12 col-md-6">
              <h2 class="fw-bold">Porsche 911 – Biểu tượng siêu xe</h2>
              <p>Porsche 911 là dòng xe thể thao huyền thoại, kết hợp thiết kế kinh điển và công nghệ hiện đại.</p>
              <a href="chitiet.html?id=1" class="btn btn-outline-primary mt-3">Khám phá chi tiết</a>
            </div>
          </div>
        </div>

        <!-- Item 2 -->
        <div class="carousel-item">
          <div class="row align-items-center g-4">
            <div class="col-12 col-md-6 text-center">
              <img src="img/audi_r8.jpg" class="img-fluid shadow rounded" alt="Audi R8">
            </div>
            <div class="col-12 col-md-6">
              <h2 class="fw-bold">Audi R8 – Hiệu năng và đẳng cấp</h2>
              <p>Audi R8 mang đến trải nghiệm lái thể thao đỉnh cao, động cơ V10 mạnh mẽ cùng thiết kế tinh tế.</p>
              <a href="chitiet.html?id=2" class="btn btn-outline-primary mt-3">Khám phá chi tiết</a>
            </div>
          </div>
        </div>

        <!-- Item 3 -->
        <div class="carousel-item">
          <div class="row align-items-center g-4">
            <div class="col-12 col-md-6 text-center">
              <img src="img/BMW_M4.jpg" class="img-fluid shadow rounded" alt="BMW M4">
            </div>
            <div class="col-12 col-md-6">
              <h2 class="fw-bold">BMW M4 – Sức mạnh và phong cách</h2>
              <p>BMW M4 kết hợp hiệu năng vượt trội với thiết kế thể thao cá tính, mang đến trải nghiệm lái đầy phấn
                khích.</p>
              <a href="chitiet.html?id=3" class="btn btn-outline-primary mt-3">Khám phá chi tiết</a>
            </div>
          </div>
        </div>

      </div>

      <!-- Controls -->
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
        <span class="visually-hidden">Trước</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
        <span class="visually-hidden">Tiếp</span>
      </button>

      <!-- Indicators -->
      <div class="carousel-indicators mt-3">
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="0" class="active" aria-current="true"
          aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
    </div>
  </main>


  <!-- REVIEWS -->
  <section class="container my-5">
    <h2 class="fw-bold text-center mb-4">Khách hàng nói gì?</h2>
    <div class="row g-4">
      <div class="col-md-4 col-sm-6 col-12">
        <div
          class="card shadow testimonial-card p-4 d-flex flex-column align-items-center justify-content-center text-center">
          <img src="img/khach1.jpg" class="rounded-circle mb-3" width="80" height="80" alt="Anh A">
          <p>"Dịch vụ tuyệt vời, xe chất lượng cao!"</p>
          <strong>- Anh An</strong>
        </div>
      </div>
      <div class="col-md-4 col-sm-6 col-12">
        <div
          class="card shadow testimonial-card p-4 d-flex flex-column align-items-center justify-content-center text-center">
          <img src="img/khach2.jpg" class="rounded-circle mb-3" width="80" height="80" alt="Anh B">
          <p>"Tôi rất hài lòng khi mua Ferrari tại đây."</p>
          <strong>- Anh Đức</strong>
        </div>
      </div>
      <div class="col-md-4 col-sm-6 col-12">
        <div
          class="card shadow testimonial-card p-4 d-flex flex-column align-items-center justify-content-center text-center">
          <img src="img/khach3.jpg" class="rounded-circle mb-3" width="80" height="80" alt="Anh C">
          <p>"Showroom chuyên nghiệp và uy tín."</p>
          <strong>- Anh Đăng</strong>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="mt-5">
    <div class="container d-flex flex-wrap justify-content-between">
      <div class="mb-3"><img src="img/logo.png" alt="Logo" height="50"></div>
      <div>
        <h5>Khám phá</h5>
        <ul class="list-unstyled">
          <li><a href="#">Trang chủ</a></li>
          <li><a href="#">Sản phẩm</a></li>
          <li><a href="#">Về chúng tôi</a></li>
          <li><a href="#">Liên hệ</a></li>
        </ul>
      </div>
      <div>
        <h5>Liên hệ</h5>
        <ul class="list-unstyled">
          <li><i class="fas fa-map-marker-alt me-1"></i>123 Nguyễn Huệ, TP.HCM</li>
          <li><i class="fas fa-phone-alt me-1"></i>+84 987 654 321</li>
          <li><i class="fas fa-envelope me-1"></i>info@example.com</li>
        </ul>
      </div>
      <div>
        <h5>Kết nối</h5>
        <div class="footer-social">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>
    </div>
    <hr class="mt-3 mb-2">
    <div class="text-center">&copy; 2025 DucCar. Bản quyền thuộc về DucCar.</div>
  </footer>

  <!-- AUTH MODAL -->
  <div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title" id="authModalLabel">Đăng nhập / Đăng ký</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <!-- LOGIN FORM -->
          <form id="loginForm" class="mb-3">
            <h6>Đăng nhập</h6>
            <div class="mb-2">
              <input type="email" class="form-control" id="loginEmail" placeholder="Email" required>
            </div>
            <div class="mb-2">
              <input type="password" class="form-control" id="loginPassword" placeholder="Mật khẩu" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-2">Đăng nhập</button>
          </form>

          <hr>

          <!-- REGISTER FORM -->
          <form id="registerForm">
            <h6>Đăng ký tài khoản</h6>
            <div class="mb-2">
              <input type="text" class="form-control" id="registerName" placeholder="Tên" required>
            </div>
            <div class="mb-2">
              <input type="email" class="form-control" id="registerEmail" placeholder="Email" required>
            </div>
            <div class="mb-2">
              <input type="password" class="form-control" id="registerPassword" placeholder="Mật khẩu" required>
            </div>
            <button type="submit" class="btn btn-success w-100">Đăng ký</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal giỏ hàng -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title">Giỏ hàng của bạn</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <!-- DANH SÁCH YÊU THÍCH -->
          <h6>Sản phẩm yêu thích</h6>
          <div id="favorites-items" class="list-group mb-3"></div>
          <hr>
          <!-- DANH SÁCH GIỎ HÀNG -->
          <h6>Giỏ hàng</h6>
          <div id="cart-items" class="list-group mb-3"></div>
          <div class="d-flex justify-content-between align-items-center">
            <b>Tổng tiền: </b><span id="cart-total">0 VNĐ</span>
            <select id="payment-method" class="form-select w-auto">
              <option value="Tiền mặt">Tiền mặt</option>
              <option value="Chuyển khoản">Chuyển khoản</option>
            </select>
            <button class="btn btn-success" onclick="checkout()">Thanh toán</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- CHAT MESSENGER -->
  <div id="messenger-chat">
    <div id="messenger-btn">
      <i class="fas fa-comment"></i>
    </div>
    <div id="messenger-box">
      <div id="messenger-header">
        <span>Hỗ trợ trực tuyến</span>
        <button id="messenger-close">✖</button>
      </div>
      <div id="messenger-content"></div>
      <div id="messenger-input">
        <input type="text" id="messenger-msg" placeholder="Nhập tin nhắn...">
        <button id="messenger-send"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
  </div>

  <script>
    const messengerBtn = document.getElementById("messenger-btn");
    const messengerBox = document.getElementById("messenger-box");
    const messengerClose = document.getElementById("messenger-close");
    const messengerContent = document.getElementById("messenger-content");
    const messengerSend = document.getElementById("messenger-send");
    const messengerMsg = document.getElementById("messenger-msg");

    const LOCAL_KEY = "messengerHistory";

    // Render 1 tin nhắn lên chat (không lưu vào storage)
    function displayMessage(text, type = "bot") {
      const msgDiv = document.createElement("div");
      msgDiv.classList.add("message", type);

      const avatar = document.createElement("img");
      avatar.classList.add("avatar");
      avatar.src = type === "bot" ? "/img/khach1.jpg" : "/img/khach2.jpg";
      msgDiv.appendChild(avatar);

      const msgText = document.createElement("span");
      msgText.textContent = text;
      msgDiv.appendChild(msgText);

      messengerContent.appendChild(msgDiv);
      messengerContent.scrollTop = messengerContent.scrollHeight;
    }

    // Render + Lưu lịch sử
    function sendMessage() {
      const text = messengerMsg.value.trim();
      if (!text) return;

      displayMessage(text, "user");

      // Lưu vào localStorage
      let history = JSON.parse(localStorage.getItem(LOCAL_KEY) || "[]");
      history.push({ text, type: "user" });
      localStorage.setItem(LOCAL_KEY, JSON.stringify(history));

      messengerMsg.value = "";

      // Bot trả lời tự động
      setTimeout(() => {
        const botReply = "Cảm ơn bạn! Chúng tôi sẽ phản hồi sớm.";
        displayMessage(botReply, "bot");

        // Lưu bot reply
        history = JSON.parse(localStorage.getItem(LOCAL_KEY) || "[]");
        history.push({ text: botReply, type: "bot" });
        localStorage.setItem(LOCAL_KEY, JSON.stringify(history));
      }, 600);
    }

    // Load lịch sử từ localStorage (chỉ render, không lưu)
    function loadHistory() {
      messengerContent.innerHTML = "";
      const history = JSON.parse(localStorage.getItem(LOCAL_KEY) || "[]");
      history.forEach(msg => displayMessage(msg.text, msg.type));
    }

    // Mở/đóng hộp chat
    messengerBtn.addEventListener("click", () => {
      messengerBox.style.display = "flex";
      loadHistory();
    });

    messengerClose.addEventListener("click", () => {
      messengerBox.style.display = "none";
    });

    // Gửi khi nhấn nút
    messengerSend.addEventListener("click", sendMessage);

    // Gửi khi nhấn Enter
    messengerMsg.addEventListener("keydown", e => {
      if (e.key === "Enter") sendMessage();
    });
  </script>


  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/script.js"></script>
  <script src="js/theme.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      AOS.init({ duration: 800, once: true });
    });
  </script>
</body>

</html>